
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุฑุงุณู ุงููุงุชุณุงุจ ุงููุจุงุดุฑ - Abdul3ziz95</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="shortcut icon" href="whatsapp-icon.png" type="image/png">
</head>
<body>
    
    <div class="page-wrapper" id="pageWrapper"> 
        <div class="container" id="mainContainer">
            
            <h1 class="app-heading">ูุฑุงุณู ุงููุงุชุณุงุจ ุงููุจุงุดุฑ</h1>
            <p class="description">ุฃุณุฑุน ุทุฑููุฉ ููุชูุงุตูุ ุฃุฏุฎู ุงูุฑูู ูุงุจุฏุฃ ุงููุญุงุฏุซุฉ ููุฑุงู.</p>

            <button id="installButton" class="install-prompt-button" style="display: none;">
                ๐ฒ ุชุซุจูุช ุงูุชุทุจูู
            </button>
            
            <div class="input-group">
                <label for="countrySearchDisplay">ุงุฎุชุฑ ุงูุฏููุฉ ุฃู ุงุจุญุซ ุนููุง:</label>
                <div class="country-display" id="countrySearchDisplay" onclick="openCountryModal()">
                    <span id="selectedCountryName" dir="rtl"></span>
                    <i class="fas fa-chevron-down country-dropdown-icon"></i>
                </div>
            </div>

            <div class="phone-input-container">
                <div class="country-code-wrapper">
                    <span id="currentFlag" class="flag-icon"></span>
                    <input type="tel" id="codeInput" value="" disabled>
                </div>
                <input type="tel" id="phoneInput" placeholder="ุฃุฏุฎู ุงูุฑูู ุงููุญูู (ุจุฏูู ุงูุฑูุฒ)" inputmode="numeric">
            </div>

            <button id="whatsappButton" onclick="openWhatsApp()">
                <img src="whatsapp-icon.png" alt="WhatsApp Icon" class="icon"> ุจุฏุก ุงููุญุงุฏุซุฉ ุงูุขู
            </button>

            <p class="note prominent-note">ูุฑุฌู ุงูุชุฃูุฏ ูู ุตุญุฉ ุฑูุฒ ุงูุฏููุฉ ุงููุฏุฎู ูุจู ุงูุถุบุท ุนูู ุจุฏุก ุงููุญุงุฏุซุฉ.</p>

            <div class="share-section">
                <p class="share-title">ุดุงุฑู ุงูุชุทุจูู ูุน ุฃุตุฏูุงุฆู:</p>
                <div class="share-icons">
                    <button class="share-btn facebook" onclick="shareApp('facebook')"><i class="fab fa-facebook-f"></i></button>
                    <button class="share-btn messenger" onclick="shareApp('messenger')"><i class="fab fa-facebook-messenger"></i></button>
                    <button class="share-btn whatsapp" onclick="shareApp('whatsapp')"><i class="fab fa-whatsapp"></i></button>
                </div>
            </div>
        </div>

        <footer class="app-footer">
            <a href="https://linktr.ee/abdul3ziz95" target="_blank" class="contact-link bold-link">๐ ุงุชุตู ุจู</a>
            <p class="copyright-text">ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2025. <span class="owner-name">Abdul3ziz95</span></p>
        </footer>
    </div>
    
    <div id="countryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุงุฎุชุฑ ุงูุฏููุฉ</h2>
                <span class="close-btn" onclick="closeCountryModal()"><i class="fas fa-times"></i></span>
            </div>
            <input type="text" id="modalSearchInput" placeholder="ุงุจุญุซ ุนู ุงุณู ุงูุฏููุฉ ุฃู ุฑูุฒูุง" oninput="filterCountries(this.value)">
            <ul id="countryListUl" class="country-list">
                </ul>
        </div>
    </div>
    <script>
        // **********************************************
        // ** ูุงุฆูุฉ ุงูุฏูู - ูุฑุฌู ูุถุน ูุฐู ุงููุงุฆูุฉ ูู ููู JS ูููุตู ุฅุฐุง ุฃุตุจุญ ูุจูุฑุงู ุฌุฏุงู **
        // **********************************************
        const countryData = [
            { name: 'ุงูุณูุฏุงู', code: '249', iso: 'sd' }, // ุฌุนู ุงูุณูุฏุงู ุฃููุงู ูุณูููุฉ ุงููุตูู
            { name: 'ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ', code: '966', iso: 'sa' },
            { name: 'ุงูุฅูุงุฑุงุช ุงูุนุฑุจูุฉ ุงููุชุญุฏุฉ', code: '971', iso: 'ae' },
            { name: 'ูุตุฑ', code: '20', iso: 'eg' },
            { name: 'ุงูููุงูุงุช ุงููุชุญุฏุฉ ุงูุฃูุฑูููุฉ', code: '1', iso: 'us' },
            { name: 'ุงูููููุฉ ุงููุชุญุฏุฉ', code: '44', iso: 'gb' },
            { name: 'ุงูุฌุฒุงุฆุฑ', code: '213', iso: 'dz' }, 
            { name: 'ุงูุฃุฑุฏู', code: '962', iso: 'jo' }, 
            { name: 'ุงููููุช', code: '965', iso: 'kw' }, 
            { name: 'ูุทุฑ', code: '974', iso: 'qa' }, 
            { name: 'ุนููุงู', code: '968', iso: 'om' },
            { name: 'ุงูููู', code: '967', iso: 'ye' },
            { name: 'ููุจูุง', code: '218', iso: 'ly' },
            { name: 'ุงููุบุฑุจ', code: '212', iso: 'ma' },
            { name: 'ููุณุทูู', code: '970', iso: 'ps' },
            { name: 'ุงูุนุฑุงู', code: '964', iso: 'iq' },
            { name: 'ุณูุฑูุง', code: '963', iso: 'sy' },
            { name: 'ูุจูุงู', code: '961', iso: 'lb' },
            { name: 'ุชููุณ', code: '216', iso: 'tn' },
            { name: 'ุฃูุบุงูุณุชุงู', code: '93', iso: 'af' }, { name: 'ุฃูุจุงููุง', code: '355', iso: 'al' }, 
            { name: 'ุณุงููุง ุงูุฃูุฑูููุฉ', code: '1684', iso: 'as' }, { name: 'ุฃูุฏูุฑุง', code: '376', iso: 'ad' }, 
            { name: 'ุฃูุบููุง', code: '244', iso: 'ao' }, { name: 'ุฃูุบูููุง', code: '1264', iso: 'ai' }, 
            { name: 'ุงูุฃุฑุฌูุชูู', code: '54', iso: 'ar' }, { name: 'ุฃุฑููููุง', code: '374', iso: 'am' }, 
            { name: 'ุฃุฑูุจุง', code: '297', iso: 'aw' }, { name: 'ุฃุณุชุฑุงููุง', code: '61', iso: 'au' }, 
            { name: 'ุงูููุณุง', code: '43', iso: 'at' }, { name: 'ุฃุฐุฑุจูุฌุงู', code: '994', iso: 'az' }, 
            { name: 'ุงูุจุงูุงูุงุณ', code: '1242', iso: 'bs' }, { name: 'ุงูุจุญุฑูู', code: '973', iso: 'bh' }, 
            { name: 'ุจูุบูุงุฏูุด', code: '880', iso: 'bd' }, { name: 'ุจุงุฑุจุงุฏูุณ', code: '1246', iso: 'bb' }, 
            { name: 'ุจููุงุฑูุณูุง', code: '375', iso: 'by' }, { name: 'ุจูุฌููุง', code: '32', iso: 'be' }, 
            { name: 'ุจููุฒ', code: '501', iso: 'bz' }, { name: 'ุจููู', code: '229', iso: 'bj' }, 
            { name: 'ุจุฑููุฏุง', code: '1441', iso: 'bm' }, { name: 'ุจูุชุงู', code: '975', iso: 'bt' }, 
            { name: 'ุจูููููุง', code: '591', iso: 'bo' }, { name: 'ุงูุจูุณูุฉ ูุงููุฑุณู', code: '387', iso: 'ba' }, 
            { name: 'ุจูุชุณูุงูุง', code: '267', iso: 'bw' }, { name: 'ุงูุจุฑุงุฒูู', code: '55', iso: 'br' }, 
            { name: 'ุจุฑููุงู', code: '673', iso: 'bn' }, { name: 'ุจูุบุงุฑูุง', code: '359', iso: 'bg' }, 
            { name: 'ุจูุฑูููุง ูุงุณู', code: '226', iso: 'bf' }, { name: 'ุจูุฑููุฏู', code: '257', iso: 'bi' }, 
            { name: 'ููุจูุฏูุง', code: '855', iso: 'kh' }, { name: 'ุงููุงููุฑูู', code: '237', iso: 'cm' }, 
            { name: 'ููุฏุง', code: '1', iso: 'ca' }, { name: 'ุงูุฑุฃุณ ุงูุฃุฎุถุฑ', code: '238', iso: 'cv' }, 
            { name: 'ุฌุฒุฑ ูุงููุงู', code: '1345', iso: 'ky' }, { name: 'ุฅูุฑูููุง ุงููุณุทู', code: '236', iso: 'cf' }, 
            { name: 'ุชุดุงุฏ', code: '235', iso: 'td' }, { name: 'ุชุดููู', code: '56', iso: 'cl' }, 
            { name: 'ุงูุตูู', code: '86', iso: 'cn' }, { name: 'ูููููุจูุง', code: '57', iso: 'co' }, 
            { name: 'ุฌุฒุฑ ุงูููุฑ', code: '269', iso: 'km' }, { name: 'ุงููููุบู', code: '242', iso: 'cg' }, 
            { name: 'ููุณุชุงุฑููุง', code: '506', iso: 'cr' }, { name: 'ูุฑูุงุชูุง', code: '385', iso: 'hr' }, 
            { name: 'ููุจุง', code: '53', iso: 'cu' }, { name: 'ูุจุฑุต', code: '357', iso: 'cy' }, 
            { name: 'ุฌูููุฑูุฉ ุงูุชุดูู', code: '420', iso: 'cz' }, { name: 'ุงูุฏููุงุฑู', code: '45', iso: 'dk' }, 
            { name: 'ุฌูุจูุชู', code: '253', iso: 'dj' }, { name: 'ุฏููููููุง', code: '1767', iso: 'dm' }, 
            { name: 'ุฌูููุฑูุฉ ุงูุฏููููููุงู', code: '1809', iso: 'do' }, { name: 'ุงูุฅููุงุฏูุฑ', code: '593', iso: 'ec' }, 
            { name: 'ุงูุณููุงุฏูุฑ', code: '503', iso: 'sv' }, { name: 'ุบูููุง ุงูุงุณุชูุงุฆูุฉ', code: '240', iso: 'gq' }, 
            { name: 'ุฅุฑูุชุฑูุง', code: '291', iso: 'er' }, { name: 'ุฅุณุชูููุง', code: '372', iso: 'ee' }, 
            { name: 'ุฅุซููุจูุง', code: '251', iso: 'et' }, { name: 'ุฌุฒุฑ ูุงุฑู', code: '298', iso: 'fo' }, 
            { name: 'ููุฌู', code: '679', iso: 'fj' }, { name: 'ููููุฏุง', code: '358', iso: 'fi' }, 
            { name: 'ูุฑูุณุง', code: '33', iso: 'fr' }, { name: 'ุงูุบุงุจูู', code: '241', iso: 'ga' }, 
            { name: 'ุบุงูุจูุง', code: '220', iso: 'gm' }, { name: 'ุฌูุฑุฌูุง', code: '995', iso: 'ge' }, 
            { name: 'ุฃููุงููุง', code: '49', iso: 'de' }, { name: 'ุบุงูุง', code: '233', iso: 'gh' }, 
            { name: 'ุงููููุงู', code: '30', iso: 'gr' }, { name: 'ุบุฑููุงุฏุง', code: '1473', iso: 'gd' }, 
            { name: 'ุบูุงุชููุงูุง', code: '502', 'gt' }, { name: 'ุบูููุง', code: '224', iso: 'gn' }, 
            { name: 'ุบูููุง ุจูุณุงู', code: '245', iso: 'gw' }, { name: 'ุบูุงูุง', code: '592', iso: 'gy' }, 
            { name: 'ูุงูุชู', code: '509', iso: 'ht' }, { name: 'ููุฏูุฑุงุณ', code: '504', iso: 'hn' }, 
            { name: 'ูููุบ ูููุบ', code: '852', iso: 'hk' }, { name: 'ุงููุฌุฑ', code: '36', iso: 'hu' }, 
            { name: 'ุขูุณููุฏุง', code: '354', iso: 'is' }, { name: 'ุงูููุฏ', code: '91', iso: 'in' }, 
            { name: 'ุฅูุฏูููุณูุง', code: '62', iso: 'id' }, { name: 'ุฅูุฑุงู', code: '98', iso: 'ir' }, 
            { name: 'ุฃูุฑููุฏุง', code: '353', iso: 'ie' }, { name: 'ุฅุณุฑุงุฆูู', code: '972', iso: 'il' }, 
            { name: 'ุฅูุทุงููุง', code: '39', iso: 'it' }, { name: 'ุณุงุญู ุงูุนุงุฌ', code: '225', iso: 'ci' }, 
            { name: 'ุฌุงูุงููุง', code: '1876', iso: 'jm' }, { name: 'ุงููุงุจุงู', code: '81', iso: 'jp' }, 
            { name: 'ูุงุฒุงุฎุณุชุงู', code: '7', iso: 'kz' }, { name: 'ููููุง', code: '254', iso: 'ke' }, 
            { name: 'ููุฑูุจุงุชู', code: '686', iso: 'ki' }, { name: 'ููุฑูุง ุงูุฌููุจูุฉ', code: '82', iso: 'kr' }, 
            { name: 'ููุฑุบูุฒุณุชุงู', code: '996', iso: 'kg' }, { name: 'ูุงูุณ', code: '856', iso: 'la' }, 
            { name: 'ูุงุชููุง', code: '371', iso: 'lv' }, { name: 'ููุณูุชู', code: '266', iso: 'ls' }, 
            { name: 'ููุจูุฑูุง', code: '231', iso: 'lr' }, { name: 'ููุชูุงููุง', code: '370', iso: 'lt' }, 
            { name: 'ูููุณูุจูุฑุบ', code: '352', iso: 'lu' }, { name: 'ูุฏุบุดูุฑ', code: '261', iso: 'mg' }, 
            { name: 'ูุงูุงูู', code: '265', iso: 'mw' }, { name: 'ูุงููุฒูุง', code: '60', iso: 'my' }, 
            { name: 'ุฌุฒุฑ ุงููุงูุฏูู', code: '960', iso: 'mv' }, { name: 'ูุงูู', code: '223', iso: 'ml' }, 
            { name: 'ูุงูุทุง', code: '356', iso: 'mt' }, { name: 'ููุฑูุชุงููุง', code: '222', iso: 'mr' }, 
            { name: 'ููุฑูุดููุณ', code: '230', iso: 'mu' }, { name: 'ุงูููุณูู', code: '52', iso: 'mx' }, 
            { name: 'ูููุฏููุง', code: '373', iso: 'md' }, { name: 'ูููุงูู', code: '377', iso: 'mc' }, 
            { name: 'ููุบูููุง', code: '976', iso: 'mn' }, { name: 'ููุฒูุจูู', code: '258', iso: 'mz' }, 
            { name: 'ููุงููุงุฑ', code: '95', iso: 'mm' }, { name: 'ูุงููุจูุง', code: '264', iso: 'na' }, 
            { name: 'ููุจุงู', code: '977', iso: 'np' }, { name: 'ููููุฏุง', code: '31', iso: 'nl' }, 
            { name: 'ูููุฒูููุฏุง', code: '64', iso: 'nz' }, { name: 'ูููุงุฑุงุบูุง', code: '505', iso: 'ni' }, 
            { name: 'ุงูููุฌุฑ', code: '227', iso: 'ne' }, { name: 'ููุฌูุฑูุง', code: '234', iso: 'ng' }, 
            { name: 'ุงููุฑููุฌ', code: '47', iso: 'no' }, { name: 'ุจุงูุณุชุงู', code: '92', iso: 'pk' }, 
            { name: 'ุจููุง', code: '507', iso: 'pa' }, { name: 'ุจุงุจูุง ุบูููุง ุงูุฌุฏูุฏุฉ', code: '675', iso: 'pg' }, 
            { name: 'ุจุงุฑุงุบูุงู', code: '595', iso: 'py' }, { name: 'ุจูุฑู', code: '51', iso: 'pe' }, 
            { name: 'ุงูููุจูู', code: '63', iso: 'ph' }, { name: 'ุจูููุฏุง', code: '48', iso: 'pl' }, 
            { name: 'ุงูุจุฑุชุบุงู', code: '351', iso: 'pt' }, { name: 'ุฑูุงูุฏุง', code: '250', iso: 'rw' }, 
            { name: 'ุฑูุณูุง', code: '7', iso: 'ru' }, { name: 'ุงูุณูุบุงู', code: '221', iso: 'sn' }, 
            { name: 'ุตุฑุจูุง', code: '381', iso: 'rs' }, { name: 'ุณูุดู', code: '248', iso: 'sc' }, 
            { name: 'ุณูุบุงููุฑุฉ', code: '65', iso: 'sg' }, { name: 'ุงูุตููุงู', code: '252', iso: 'so' }, 
            { name: 'ุฌููุจ ุฃูุฑูููุง', code: '27', iso: 'za' }, { name: 'ุฌููุจ ุงูุณูุฏุงู', code: '211', iso: 'ss' }, 
            { name: 'ุฅุณุจุงููุง', code: '34', iso: 'es' }, { name: 'ุณุฑููุงููุง', code: '94', iso: 'lk' }, 
            { name: 'ุงูุณููุฏ', code: '46', iso: 'se' }, { name: 'ุณููุณุฑุง', code: '41', iso: 'ch' }, 
            { name: 'ุชุงููุงู', code: '886', iso: 'tw' }, { name: 'ุชูุฒุงููุง', code: '255', iso: 'tz' }, 
            { name: 'ุชุงููุงูุฏ', code: '66', iso: 'th' }, { name: 'ุชูุบู', code: '228', iso: 'tg' }, 
            { name: 'ุชุฑููุง', code: '90', iso: 'tr' }, { name: 'ุฃูุบูุฏุง', code: '256', iso: 'ug' }, 
            { name: 'ุฃููุฑุงููุง', code: '380', iso: 'ua' }, { name: 'ุฃูุฑูุบูุงู', code: '598', iso: 'uy' }, 
            { name: 'ููุฒูููุง', code: '58', iso: 've' }, { name: 'ููุชูุงู', code: '84', iso: 'vn' }, 
            { name: 'ุฒุงูุจูุง', code: '260', iso: 'zm' }, { name: 'ุฒููุจุงุจูู', code: '263', iso: 'zw' }
        ];

        // **********************************************
        // ** ููุทู JavaScript ููุญุณููู **
        // **********************************************
        
        const APP_LINK = 'https://abdul3ziz95.github.io/zool/';
        const SHARE_MESSAGE = 'ุฌุฑุจูุง ูุฑุงุณู ุงููุงุชุณุงุจ ุงูุณูุฏุงูู ุงูููุฑู! ุฃุณุฑุน ุทุฑููุฉ ูุจุฏุก ูุญุงุฏุซุฉ ุฏูู ุญูุธ ุงูุฑูู. ุงูุฑุงุจุท: ' + APP_LINK;

        const ELEMENTS = {
            installButton: document.getElementById('installButton'),
            countryModal: document.getElementById('countryModal'),
            countryListUl: document.getElementById('countryListUl'),
            selectedCountryName: document.getElementById('selectedCountryName'),
            currentFlag: document.getElementById('currentFlag'),
            codeInput: document.getElementById('codeInput'), 
            phoneInput: document.getElementById('phoneInput'),
            modalSearchInput: document.getElementById('modalSearchInput')
        };

        // ************** 1. ูุธุงุฆู ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ **************
        
        function selectCountry(name, code, iso) {
            // ุชุญุฏูุซ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
            ELEMENTS.selectedCountryName.textContent = `${name} (+${code})`;
            ELEMENTS.currentFlag.className = `flag-icon flag-icon-${iso.toLowerCase()}`;
            ELEMENTS.codeInput.value = `+${code}`;
            closeCountryModal();
            ELEMENTS.phoneInput.focus(); 
        }

        function openWhatsApp() {
            const code = ELEMENTS.codeInput.value.replace('+', '').trim(); 
            // ุฅุฒุงูุฉ ุงููุณุงูุงุช ูุนูุงูุงุช + ู -
            const localNumber = ELEMENTS.phoneInput.value.trim().replace(/[\s+-]/g, '');

            if (!code || code.length < 1 || !localNumber || localNumber.length < 6) {
                alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฑูุฒ ุงูุฏููุฉ ูุฑูู ูุงุชู ูุญูู ุตุงูุญ (ูุง ููู ุนู 6 ุฃุฑูุงู).');
                return;
            }

            // ุงุณุชุฎุฏุงู ุฑุงุจุท ุงูููุจ ูุชุญุณูู ุงูุชูุงูู
            const fullNumber = code + localNumber;
            const whatsappLink = 'https://wa.me/' + fullNumber;
            window.open(whatsappLink, '_blank');
        }

        function shareApp(platform) {
            let url = '';
            switch (platform) {
                case 'whatsapp':
                    url = `https://wa.me/?text=${encodeURIComponent(SHARE_MESSAGE)}`;
                    break;
                case 'messenger':
                    // ุงุณุชุฎุฏุงู ุฑุงุจุท ุงูููุจ ูููุดุงุฑูุฉ ุนุจุฑ Messenger (ูุฏ ูุง ูุนูู ูู ูู ุงูุชุทุจููุงุช)
                    url = `https://www.facebook.com/dialog/send?link=${encodeURIComponent(APP_LINK)}&app_id=1234567890&redirect_uri=${encodeURIComponent(APP_LINK)}`;
                    break;
                case 'facebook':
                    url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(APP_LINK)}`;
                    break;
                default:
                    return;
            }
            window.open(url, '_blank', 'width=600,height=400');
        }
        
        // ************** 2. ููุทู ุงููุงุฆูุฉ ุงููุฎุตุตุฉ (Modal) **************

        function populateCountries() {
            // ูุฑุฒ ุฃุจุฌุฏู ุจุงูุงุณู ุงูุนุฑุจู (ูุน ูุถุน ุงูุณูุฏุงู ุฃููุงู ูุฏููุงู)
            countryData.sort((a, b) => {
                if (a.name === 'ุงูุณูุฏุงู') return -1;
                if (b.name === 'ุงูุณูุฏุงู') return 1;
                return a.name.localeCompare(b.name, 'ar');
            });
            
            // ุชุญุณูู ุฃุฏุงุก ุฅุถุงูุฉ ุงูุนูุงุตุฑ ุจุงุณุชุฎุฏุงู DocumentFragment
            const fragment = document.createDocumentFragment();
            
            countryData.forEach(country => {
                const listItem = document.createElement('li');
                listItem.className = 'country-item';
                listItem.setAttribute('data-code', country.code);
                listItem.setAttribute('data-iso', country.iso);
                listItem.innerHTML = `
                    <span class="flag-icon flag-icon-${country.iso.toLowerCase()} country-flag-modal" aria-hidden="true"></span>
                    <span class="country-name-modal">${country.name}</span>
                    <span class="country-code-modal" dir="ltr">(+${country.code})</span>
                `;
                // ุงุณุชุฎุฏุงู ุฏุงูุฉ selectCountry ูุจุงุดุฑุฉ ุนูุฏ ุงูููุฑ
                listItem.onclick = () => selectCountry(country.name, country.code, country.iso);
                fragment.appendChild(listItem);
            });
            
            ELEMENTS.countryListUl.appendChild(fragment);
        }
        
        function filterCountries(searchTerm) {
            const filter = searchTerm.toUpperCase().trim();
            const items = ELEMENTS.countryListUl.getElementsByTagName('li');
            
            // ุงุณุชุฎุฏุงู ุญููุฉ for ุงูุนุงุฏูุฉ ุจุฏูุงู ูู Array.from().forEach ูุณุฑุนุฉ ุงูุชูููุฐ
            for (let i = 0; i < items.length; i++) {
                const item = items[i];
                // ุงูุจุญุซ ูู ุงูุงุณู ูุงูุฑูุฒ ูุนุงู
                const text = item.textContent || item.innerText;
                if (text.toUpperCase().includes(filter)) {
                    item.style.display = "";
                } else {
                    item.style.display = "none";
                }
            }
        }

        function openCountryModal() {
            ELEMENTS.countryModal.style.display = "flex";
            document.body.classList.add('modal-open'); // ุฅุถุงูุฉ ููุงุณ ููุชุญูู ูู ุชูุฑูุฑ ุงูุฎูููุฉ
            
            // ุชุฃุฎูุฑ ุงูุชุฑููุฒ ูุถูุงู ุฃู ุงูู Modal ูุฏ ุธูุฑ ุชูุงูุงู
            setTimeout(() => {
                ELEMENTS.modalSearchInput.focus();
            }, 10);
        }

        function closeCountryModal() {
            ELEMENTS.countryModal.style.display = "none";
            document.body.classList.remove('modal-open');
            // ูุณุญ ุญูู ุงูุจุญุซ ูุฅุนุงุฏุฉ ููุชุฑุฉ ุงููุงุฆูุฉ
            ELEMENTS.modalSearchInput.value = '';
            filterCountries('');
        }
        
        // ุฅุบูุงู ุงูู Modal ุนูุฏ ุงูุถุบุท ุนูู ููุชุงุญ ESC
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && ELEMENTS.countryModal.style.display === 'flex') {
                closeCountryModal();
            }
        });
        
        // ************** 3. ููุทู ุชุซุจูุช ุงูุดุงุดุฉ ูุงูุฃุฏุงุก (PWA & Fixes) **************
        
        function initializeApp() {
            // ** ุงูุญู ุงูููุงุฆู ูููุน ุงูุชุฒุงุฒ ุงูุดุงุดุฉ ุนูู ุงูุฌูุงู **
            function setVhProperty() {
                // ุญุณุงุจ 1% ูู ุงุฑุชูุงุน ุงููุงูุฐุฉ ุงููุฑุฆู
                let vh = window.innerHeight * 0.01;
                // ุชุทุจูููุง ูุฎุงุตูุฉ CSS ูุฎุตุตุฉ
                document.documentElement.style.setProperty('--vh', `${vh}px`);
                // ุชุญุณูู ุงูุฃุฏุงุก: ุงุณุชุฎุฏุงู translateZ ูุชุญููุฒ ุชุณุฑูุน ุงูุฃุฌูุฒุฉ
                document.getElementById('pageWrapper').style.transform = 'translateZ(0)';
            }
            // ุชุทุจูููุง ุนูุฏ ุงูุชุญููู ู ุนูุฏ ุชุบููุฑ ุญุฌู ุงููุงูุฐุฉ (ุงูุฏูุฑุงู ูุซูุงู)
            setVhProperty();
            window.addEventListener('resize', setVhProperty);
            
            // ููุก ูุงุฆูุฉ ุงูุฏูู ุงููุฎุตุตุฉ ูุชุนููู ุงูุงูุชุฑุงุถู (ุงูุณูุฏุงู)
            populateCountries();
            selectCountry('ุงูุณูุฏุงู', '249', 'sd');
            
            // ุชููุฆุฉ PWA
            setupPWA();
        }
        
        let deferredPrompt; 
        function setupPWA() {
            if ('serviceWorker' in navigator) {
                // ุชุณุฌูู Service Worker
                navigator.serviceWorker.register('/zool/sw.js', { scope: '/zool/' }) 
                    .then((registration) => { console.log('SW registration successful.'); })
                    .catch((err) => { console.log('SW registration failed:', err); });
            }
            
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e; 
                ELEMENTS.installButton.style.display = 'block'; 
            });

            ELEMENTS.installButton.addEventListener('click', () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            ELEMENTS.installButton.style.display = 'none'; 
                        }
                        deferredPrompt = null; 
                    });
                } else {
                    alert('ูุชุซุจูุช ุงูุชุทุจูู: ุงูุชุญ ูุงุฆูุฉ ุงููุชุตูุญ (โฎ) ูุงุฎุชุฑ "ุงูุชุซุจูุช" ุฃู "ุฅุถุงูุฉ ุฅูู ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ".');
                }
            });
        }

        // ุชุดุบูู ูู ุดูุก ุนูุฏ ุงูุชูุงู ุชุญููู ุงูุตูุญุฉ
        window.addEventListener('load', initializeApp);

        // ูุถุน ุงูุฏูุงู ูู ุงููุทุงู ุงูุนุงู ูููุตูู ุฅูููุง ูู HTML (ุฃูู ูุธุงูุฉ ูููู ุถุฑูุฑู ูู onclick)
        window.openCountryModal = openCountryModal;
        window.closeCountryModal = closeCountryModal;
        window.filterCountries = filterCountries;
        window.openWhatsApp = openWhatsApp;
        window.shareApp = shareApp;
    </script>
</body>
</html>
